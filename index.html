<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>中文識字通 AI (V18.6 課堂實戰版)</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"KaiTi"', '"BiauKai"', '"STKaiti"', '"DFKai-SB"', '"Noto Serif TC"', '"Songti TC"', 'serif'],
                        serif: ['"KaiTi"', '"BiauKai"', '"STKaiti"', '"DFKai-SB"', '"Noto Serif TC"', '"Songti TC"', 'serif'],
                    }
                }
            }
        }
    </script>
    
    <!-- Babel Standalone for JSX/TSX support -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts: Noto Serif TC (as a fallback for KaiTi style) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;900&display=swap" rel="stylesheet">

    <!-- Helper Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/cnchar/cnchar.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/cnchar-trad/cnchar.trad.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/cnchar-radical/cnchar.radical.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary: #FF9800;
            --primary-dark: #E65100;
            --primary-light: #FFF3E0;
            --accent: #FF5252;
            --success: #4CAF50;
            --text-main: #5D4037;
            --bg-body: #FFF8E1;
            --radius-box: 24px;
        }

        /* 強制所有元素使用楷書，包含表單控件 */
        body, button, input, textarea, select {
            font-family: "KaiTi", "BiauKai", "STKaiti", "DFKai-SB", "Noto Serif TC", "Songti TC", serif;
        }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            background-image: radial-gradient(#ffe0b2 15%, transparent 16%), radial-gradient(#ffe0b2 15%, transparent 16%);
            background-size: 60px 60px;
            background-position: 0 0, 30px 30px;
            min-height: 100vh;
        }

        .hanzi-grid {
            background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxsaW5lIHgxPSI1MCUiIHkxPSIwIiB4Mj0iNTAlIiB5Mj0iMTAwJSIgc3Ryb2tlPSIjZmZjY2NjIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1kYXNoYXJyYXk9IjgsOCIvPjxsaW5lIHgxPSIwIiB5MT0iNTAlIiB4Mj0iMTAwJSIgeTI9IjUwJSIgc3Ryb2tlPSIjZmZjY2NjIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1kYXNoYXJyYXk9IjgsOCIvPjwvc3ZnPg==");
            background-size: 100% 100%;
        }

        @media print {
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            body { background: white !important; background-image: none !important; padding: 0 !important; }
        }
        .print-only { display: none; }

        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .tab-content-enter { animation: tabEnter 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }
        @keyframes tabEnter { 
            0% { opacity: 0; transform: translateY(10px) scale(0.98); } 
            100% { opacity: 1; transform: translateY(0) scale(1); } 
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--primary-light); }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }
    </style>

    <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://esm.sh/@google/genai@^1.34.0",
        "react": "https://esm.sh/react@^19.2.3",
        "react-dom": "https://esm.sh/react-dom@^19.2.3",
        "react-dom/client": "https://esm.sh/react-dom@^19.2.3/client",
        "react/jsx-runtime": "https://esm.sh/react@^19.2.3/jsx-runtime",
        "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
        "react/": "https://esm.sh/react@^19.2.3/"
      }
    }
    </script>
<link rel="stylesheet" href="/index.css">
</head>
<body>
    <div id="root"></div>

    <!-- 
      注意：type="text/babel" 和 data-presets="react,typescript" 是解決 "Unexpected token <" 的關鍵。
      這允許瀏覽器在運行時編譯 JSX 代碼。
    -->
    <script type="text/babel" data-type="module" data-presets="react,typescript">
        import React, { useState, useEffect, useRef, useMemo } from 'react';
        import ReactDOM from 'react-dom/client';
        import App from './App';

        const rootElement = document.getElementById('root');
        if (!rootElement) {
            throw new Error("Could not find root element to mount to");
        }

        const root = ReactDOM.createRoot(rootElement);
        root.render(
            <React.StrictMode>
                <App />
            </React.StrictMode>
        );
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>